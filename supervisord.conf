[supervisord]
nodaemon=true
logfile=/app/logs/supervisord.log
pidfile=/app/supervisord.pid
loglevel=info

# ----------------------------------------------------------------
# 1. THE API (Control Plane)
# ----------------------------------------------------------------
[program:api]
command=uvicorn main:app --host 0.0.0.0 --port 8000
directory=/app
autostart=true
autorestart=true
stdout_logfile=/app/logs/api.out.log
stdout_logfile_maxbytes=50MB
stdout_logfile_backups=5
stderr_logfile=/app/logs/api.err.log
stderr_logfile_maxbytes=50MB
stderr_logfile_backups=5

# ----------------------------------------------------------------
# 2. THE ENGINE (Trading Core)
# ----------------------------------------------------------------
[program:engine]
command=python core/engine.py
directory=/app
autostart=true
autorestart=true
startsecs=5
stdout_logfile=/app/logs/engine.out.log
stdout_logfile_maxbytes=50MB
stdout_logfile_backups=5
stderr_logfile=/app/logs/engine.err.log
stderr_logfile_maxbytes=50MB
stderr_logfile_backups=5

# ----------------------------------------------------------------
# 3. THE SHERIFF (Risk Watchdog)
# ----------------------------------------------------------------
[program:sheriff]
command=python services/risk_watchdog.py
directory=/app
autostart=true
autorestart=true
startsecs=10
stdout_logfile=/app/logs/sheriff.out.log
stdout_logfile_maxbytes=50MB
stdout_logfile_backups=5
stderr_logfile=/app/logs/sheriff.err.log
stderr_logfile_maxbytes=50MB
stderr_logfile_backups=5

# ----------------------------------------------------------------
# 4. THE SENTINEL (Telegram Alerts)
# ----------------------------------------------------------------
[program:sentinel]
command=python services/telegram_bot.py
directory=/app
autostart=true
autorestart=true
startsecs=15
stdout_logfile=/app/logs/sentinel.out.log
stdout_logfile_maxbytes=10MB
stdout_logfile_backups=3
stderr_logfile=/app/logs/sentinel.err.log
stderr_logfile_maxbytes=10MB
stderr_logfile_backups=3

# ----------------------------------------------------------------
# 5. NEW: THE AI INTELLIGENCE CORE
# ----------------------------------------------------------------
[program:risk_officer]
command=python services/risk_officer_daemon.py
directory=/app
autostart=true
autorestart=true
startsecs=20
stdout_logfile=/app/logs/risk_officer.out.log
stdout_logfile_maxbytes=50MB
stdout_logfile_backups=5
stderr_logfile=/app/logs/risk_officer.err.log
stderr_logfile_maxbytes=50MB
stderr_logfile_backups=5
